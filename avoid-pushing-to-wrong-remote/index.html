<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" class="h-full" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D,%22class%22:%7B%22ssr%22:%22h-full%22%7D%7D">
  <head>
    <title>Avoid pushing to a wrong remote in a git repo  | Ana Rute</title><meta name="gridsome:hash" content="752c6ce69aa6bc2761e11346ad248f842b46c834"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.23"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" data-key="description" name="description" content="Simple trick to avoid pushing to a wrong remote when using multiple remotes in git"><meta data-vue-tag="ssr" property="og:type" content="article"><meta data-vue-tag="ssr" property="og:title" content="Avoid pushing to a wrong remote in a git repo"><meta data-vue-tag="ssr" property="og:description" content="Simple trick to avoid pushing to a wrong remote when using multiple remotes in git"><meta data-vue-tag="ssr" property="og:url" content="https://anarute.com/avoid-pushing-to-wrong-remote/"><meta data-vue-tag="ssr" property="article:published_time" content="2024-02-24"><meta data-vue-tag="ssr" property="og:image" content="https://anarute.com/images/card.png"><meta data-vue-tag="ssr" name="twitter:card" content="summary_large_image"><meta data-vue-tag="ssr" name="twitter:title" content="Avoid pushing to a wrong remote in a git repo"><meta data-vue-tag="ssr" name="twitter:description" content="Simple trick to avoid pushing to a wrong remote when using multiple remotes in git"><meta data-vue-tag="ssr" name="twitter:site" content="@ana_rute"><meta data-vue-tag="ssr" name="twitter:creator" content="@ana_rute"><meta data-vue-tag="ssr" name="twitter:image" content="https://anarute.com/images/card.png"><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon.ce0531f.1dbd3df5a133ad4bfceee6f845dec19f.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/assets/static/favicon.ac8d93a.1dbd3df5a133ad4bfceee6f845dec19f.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="96x96" href="/assets/static/favicon.b9532cc.1dbd3df5a133ad4bfceee6f845dec19f.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="76x76" href="/assets/static/favicon.f22e9f3.1dbd3df5a133ad4bfceee6f845dec19f.png"><link data-vue-tag="ssr" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Sans:400,700%7CCardo"><link rel="preload" href="/assets/css/10.styles.71c6ed44.css" as="style"><link rel="preload" href="/assets/js/app.0aaf7b86.js" as="script"><link rel="preload" href="/assets/js/page--src--templates--post-vue.910010bc.js" as="script"><link rel="prefetch" href="/assets/js/12.bf723347.js"><link rel="prefetch" href="/assets/js/page--src--pages--404-vue.f874ac3a.js"><link rel="prefetch" href="/assets/js/page--src--pages--about-vue.d8cccfac.js"><link rel="prefetch" href="/assets/js/page--src--pages--index-vue.c4d60db6.js"><link rel="prefetch" href="/assets/js/page--src--pages--talks-vue.fb1d0092.js"><link rel="prefetch" href="/assets/js/page--src--pages--uses-vue.3f17494c.js"><link rel="prefetch" href="/assets/js/page--src--templates--author-vue.4fa776a2.js"><link rel="prefetch" href="/assets/js/page--src--templates--tag-vue.18e80999.js"><link rel="prefetch" href="/assets/js/vendors~page--src--pages--index-vue~page--src--templates--author-vue~page--src--templates--post-vue~~a0fae544.81352eac.js"><link rel="prefetch" href="/assets/js/vendors~page--src--templates--post-vue.989aa289.js"><link rel="stylesheet" href="/assets/css/10.styles.71c6ed44.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body class="antialiased font-serif" data-vue-tag="%7B%22class%22:%7B%22ssr%22:%22antialiased%20font-serif%22%7D%7D">
    <div data-server-rendered="true" id="app" class="layout"><section class="menu"><div><nav><ul><li><a href="/" class="active">posts</a></li><li><a href="/about/">about</a></li><li><a href="/uses/">setup</a></li><li><a href="/talks/">talks</a></li><li><a href="/feed.xml">RSS Feed</a></li></ul></nav></div></section><main><header><div><div><h1>Avoid pushing to a wrong remote in a git repo</h1><p><span><a href="/author/anarute/">anarute</a>
          •
        </span><time datetime="2024-02-23 20:12:19">23 February, 2024</time></p></div></div></header><article><!----><div><p>If you work with open source, it is possible that in your local repository you
have added multiple remotes to work with. Let's say one for upstream and one for
your fork.</p>
<p>More often than I would expect, I end up pushing to upstream (if I have rights
to the repo) when I wanted to push my fork and it sometimes can be very
annoying.</p>
<p>A small trick I've been using to avoid this is simply erasing the push url for
the remote I don't want to push directly.</p>
<p>When you add a remote to your repo with <code class="shiki-inline" style="background: #2e3440; color: #d8dee9">git remote add &lt;remote_name&gt;
&lt;remote_url&gt;</code>, git sets 2 urls for it: one for fetching changes and another for
pushing. This means for the same remote we could have different urls which gives
us flexibility to handle our workflow.</p>
<p>Running <code class="shiki-inline" style="background: #2e3440; color: #d8dee9">git remote -v</code> you can see how the remotes are organized in your local
repo and you will see something like:</p>
<code class="shiki" style="background: #2e3440; color: #d8dee9">╰─➤  git remote -v
origin  git@github.com:anarute/anarute.github.io.git (fetch)
origin  git@github.com:anarute/anarute.github.io.git (push)
fork  git@github.com:otheruser/anarute.github.io.git (fetch)
fork  git@github.com:otheruser/anarute.github.io.git (push)</code>
<p>As a very simple way to avoid pushing to the remote you don't want, you can
override the remote's push url with <code class="shiki-inline" style="background: #2e3440; color: #d8dee9">git remote set-url --push &lt;remote_name&gt;
no-push</code>, this way even if you try to push to it, git won't find a valid url and
you are safe from commiting things to the wrong place.</p>
<code class="shiki" style="background: #2e3440; color: #d8dee9">╰─➤  git push origin main
fatal: &#039;no-push&#039; does not appear to be a git repository
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists</code>
<p>While writing this post it also occurred to me that you can even set the fetch
url for the main repo and the push url for you fork, making the work between the
upstream and fork look like it's the same repo but in reality you are working
with two. I can imagine this being a bit radical and can lead to unwanted
scenarios when for some reason you do need to fetch from the fork, but maybe
it's worth experimenting and see what suites your workflow better.</p>
</div><footer><div><a href="/tag/git/" class="tag">
            git
          </a><a href="/tag/programming/" class="tag">
            programming
          </a></div></footer><div id="disqus_thread"></div></article></main></div>
    <script>window.__INITIAL_STATE__={"data":{"post":{"title":"Avoid pushing to a wrong remote in a git repo","slug":"avoid-pushing-to-wrong-remote","datetime":"2024-02-23 20:12:19","content":"\u003Cp\u003EIf you work with open source, it is possible that in your local repository you\nhave added multiple remotes to work with. Let's say one for upstream and one for\nyour fork.\u003C\u002Fp\u003E\n\u003Cp\u003EMore often than I would expect, I end up pushing to upstream (if I have rights\nto the repo) when I wanted to push my fork and it sometimes can be very\nannoying.\u003C\u002Fp\u003E\n\u003Cp\u003EA small trick I've been using to avoid this is simply erasing the push url for\nthe remote I don't want to push directly.\u003C\u002Fp\u003E\n\u003Cp\u003EWhen you add a remote to your repo with \u003Ccode class=\"shiki-inline\" style=\"background: #2e3440; color: #d8dee9\"\u003Egit remote add &lt;remote_name&gt;\n&lt;remote_url&gt;\u003C\u002Fcode\u003E, git sets 2 urls for it: one for fetching changes and another for\npushing. This means for the same remote we could have different urls which gives\nus flexibility to handle our workflow.\u003C\u002Fp\u003E\n\u003Cp\u003ERunning \u003Ccode class=\"shiki-inline\" style=\"background: #2e3440; color: #d8dee9\"\u003Egit remote -v\u003C\u002Fcode\u003E you can see how the remotes are organized in your local\nrepo and you will see something like:\u003C\u002Fp\u003E\n\u003Ccode class=\"shiki\" style=\"background: #2e3440; color: #d8dee9\"\u003E╰─➤  git remote -v\norigin  git@github.com:anarute\u002Fanarute.github.io.git (fetch)\norigin  git@github.com:anarute\u002Fanarute.github.io.git (push)\nfork  git@github.com:otheruser\u002Fanarute.github.io.git (fetch)\nfork  git@github.com:otheruser\u002Fanarute.github.io.git (push)\u003C\u002Fcode\u003E\n\u003Cp\u003EAs a very simple way to avoid pushing to the remote you don't want, you can\noverride the remote's push url with \u003Ccode class=\"shiki-inline\" style=\"background: #2e3440; color: #d8dee9\"\u003Egit remote set-url --push &lt;remote_name&gt;\nno-push\u003C\u002Fcode\u003E, this way even if you try to push to it, git won't find a valid url and\nyou are safe from commiting things to the wrong place.\u003C\u002Fp\u003E\n\u003Ccode class=\"shiki\" style=\"background: #2e3440; color: #d8dee9\"\u003E╰─➤  git push origin main\nfatal: &#039;no-push&#039; does not appear to be a git repository\nfatal: Could not read from remote repository.\n\nPlease make sure you have the correct access rights\nand the repository exists\u003C\u002Fcode\u003E\n\u003Cp\u003EWhile writing this post it also occurred to me that you can even set the fetch\nurl for the main repo and the push url for you fork, making the work between the\nupstream and fork look like it's the same repo but in reality you are working\nwith two. I can imagine this being a bit radical and can lead to unwanted\nscenarios when for some reason you do need to fetch from the fork, but maybe\nit's worth experimenting and see what suites your workflow better.\u003C\u002Fp\u003E\n","description":"Simple trick to avoid pushing to a wrong remote when using multiple remotes in git","cover":"","fullscreen":false,"author":{"id":"anarute","title":"anarute","path":"\u002Fauthor\u002Fanarute\u002F"},"tags":[{"id":"git","title":"git","path":"\u002Ftag\u002Fgit\u002F"},{"id":"programming","title":"programming","path":"\u002Ftag\u002Fprogramming\u002F"}]}},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/assets/js/app.0aaf7b86.js" defer></script><script src="/assets/js/page--src--templates--post-vue.910010bc.js" defer></script>
  </body>
</html>
